<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blog Post Creator | Hope Renewed LLC</title>
<style>
  body { font-family:'Inter',sans-serif; background:#f8fafc; color:#0b2545; padding:20px; }
  h1 { text-align:center; margin-bottom:30px; }
  label { display:block; font-weight:600; margin-top:15px; }
  input, textarea { width:100%; padding:10px; margin-top:5px; border-radius:6px; border:1px solid #ccc; font-size:1rem; box-sizing:border-box; }
  textarea { resize:vertical; min-height:150px; }
  button { margin-top:20px; padding:12px 20px; background:#0b2545; color:#fff; border:none; border-radius:6px; font-weight:700; cursor:pointer; transition:background 0.3s; }
  button:hover { background:#133767; }
</style>
</head>
<body>
<h1>Hope Renewed LLC Blog Post Creator</h1>

<label for="title">Post Title</label>
<input type="text" id="title" placeholder="Enter your post title" />

<label for="image">Featured Image URL</label>
<input type="text" id="image" placeholder="https://example.com/image.jpg" />

<label for="excerpt">Excerpt (short summary)</label>
<textarea id="excerpt" placeholder="A short summary of the post"></textarea>

<label for="content">Content (HTML allowed)</label>
<textarea id="content" placeholder="Write your post content here, HTML tags allowed"></textarea>

<button id="generate">Generate & Download Post</button>

<script>
const sheetUrl = "https://script.google.com/macros/s/AKfycbxRgJgTCBLzEb29OaEgHhPeslLBDpDS35JQiTIcykZlOnEikNy0cxDQlFRXye8QRzrd/exec"; // replace with your Apps Script URL

function slugify(text){
  return text.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');
}

document.getElementById('generate').addEventListener('click', async () => {
  const title = document.getElementById('title').value.trim();
  const image = document.getElementById('image').value.trim();
  const excerpt = document.getElementById('excerpt').value.trim();
  const content = document.getElementById('content').value.trim();

  if(!title || !image || !excerpt || !content){
    alert('Please fill in all fields.');
    return;
  }

  const slug = slugify(title);
  const filename = `${slug}.html`;
  const postLink = `posts/${filename}`; // folder structure for your website

  // Generate HTML
  const html = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>${title} | Hope Renewed LLC</title>
<link rel="icon" href="https://hope-renewed.us/images/logo.png" type="image/png">
<style>
body { font-family:'Inter',sans-serif; background:#f8fafc; color:#0b2545; line-height:1.6; margin:0; padding:0; }
header { display:flex; justify-content: space-between; align-items:center; padding:20px 8%; background:#fff; box-shadow:0 4px 10px rgba(0,0,0,0.05); }
.brand { display:flex; align-items:center; gap:12px; }
.brand h1{margin:0; font-size:1.4rem;}
.logo {height:60px; width:auto;}
.btn-call {background:#0b2545;color:#fff;padding:10px 18px;border-radius:6px;font-weight:600;text-decoration:none;}
.hero {text-align:center; padding:60px 10%; background:#eaeff5;}
.hero h2 {font-size:2rem; margin-bottom:15px;}
.hero p {max-width:700px; margin:0 auto; color:#444; font-size:1.1rem;}
.post-container {padding:40px 10%; max-width:800px; margin:0 auto; background:#fff; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.08);}
.post-container h1 {font-size:2rem; margin-bottom:15px;}
.post-container img {width:100%; margin-bottom:20px; border-radius:6px;}
.post-container p {margin-bottom:15px;}
footer {background:#0b2545; color:#fff; text-align:center; padding:25px 10px; font-size:0.9rem;}
</style>
</head>
<body>
<header>
<div class="brand">
<img src="images/logo.png" alt="Hope Renewed LLC Logo" class="logo">
<h1>Hope Renewed LLC</h1>
</div>
<a href="tel:+19363375993" class="btn-call">ðŸ“ž Call: 936-337-5993</a>
</header>

<section class="hero">
<h2>${title}</h2>
<p>${excerpt}</p>
</section>

<div class="post-container">
<img src="${image}" alt="${title}">
${content}
</div>

<footer>
&copy; ${new Date().getFullYear()} Hope Renewed LLC | Conroe â€¢ Houston â€¢ Surrounding Areas<br>
<a href="mailto:forrest.w@hope-renewed.us" style="color:#fff;text-decoration:underline;">forrest.w@hope-renewed.us</a> |
<a href="tel:9363375993" style="color:#fff;text-decoration:underline;">936-337-5993</a>
</footer>
</body>
</html>`;

  // Download HTML
  const blob = new Blob([html], {type:'text/html'});
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = filename;
  link.click();

  // POST to Google Sheet
  try {
    const res = await fetch(sheetUrl, {
      method:'POST',
      headers:{ 'Content-Type':'application/json' },
      body: JSON.stringify({ title, image, excerpt, link: postLink })
    });
    const data = await res.json();
    if(data.status === "success") console.log("Blog post added to Google Sheet!");
    else console.error("Failed to add to sheet:", data.message);
  } catch(err){
    console.error("Error posting to sheet:", err);
  }

});
</script>
</body>
</html>
